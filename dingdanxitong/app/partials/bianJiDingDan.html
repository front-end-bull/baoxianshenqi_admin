            <div>
                <ul class="breadcrumb">
                    <li>
                        <a href="#/bianJiDingDan">订单中心</a>
                    </li>
                    <li>
                        <a href="#/bianJiDingDan">跟进中</a>
                    </li>
                    <li>
                        <a href="#/bianJiDingDan">编辑订单</a>
                    </li>
                </ul>
            </div>

          

            <div class="row">
                <div class="box col-md-12">
                    <div class="box-inner">
                        <div class="box-header well">
                            <h2><i class="glyphicon glyphicon-info-sign"></i> 编辑订单 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;订单号：{{order_id}}</h2>
                            
                            <div class="box-icon">
                               
                                <a href="javascript:void(0)" class="btn btn-minimize btn-round btn-default" ng-click="post()"><i
                                        class="glyphicon glyphicon-ok" style="color:#2bd394;"></i></a>
                                <a href="#/genJinZhong" class="btn btn-close btn-round btn-default" ><i
                                        class="glyphicon glyphicon-remove" style="color: red;"></i></a>
                            </div>
                        </div>
                        <div class="box-content">
                            <div class="paper-title" >
                               代理人信息
                            </div>

                                <div class="paper-row row">
                                    <div class="col-md-1" style="padding-right: 0;" >姓名:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input disabled="disabled" ng-model="name"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">UID:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input ng-change="change_uid()" ng-model="uid" id="uid"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">公司:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input disabled="disabled" ng-model="company"></input></div>
                                    <div class="col-md-1"></div>
                                </div> 

                                <div class="paper-row row">
                                    <div class="col-md-1" style="padding-right: 0;" >身份证号:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input disabled="disabled" ng-model="id_card"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">手机号:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input disabled="disabled" ng-model="phonenumber"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">邮箱:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input disabled="disabled" ng-model="email"></input></div>
                                    <div class="col-md-1"></div>
                                </div>

                                <div class="paper-row row">
                                    <div class="col-md-1" style="padding-right: 0;">开卡银行:</div>
                                    <div class="col-md-2" style="padding-left: 0;">
                                        <select disabled="disabled" ng-model="bank"></select>
                                    </div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">银行卡号:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input disabled="disabled" ng-model="banknummber"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">佣金:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input ng-model="yongjin" ng-model="yongjin"></input></div>
                                    <div class="col-md-1"></div>


                                </div>
                               
                                <div class="paper-row row">
                                    <div class="col-md-1" style="padding-right: 0;">开户行地址:</div>
                                    <div class="col-md-6" style="padding-left: 0;"><input disabled="disabled" style="width: 100%;" ng-model="bankaddress"></input></div>
                                </div>

                            <div class="paper-title" style="margin-bottom: 15px;margin-top: 50px;">
                               产品信息 
                               <!-- <span style="background-color: #F99406;border-radius:2px;color: white;padding:3px 8px;margin-left: 10px;">总保费：16861.57 元</span> -->
                                    <i ng-click="add_block()" class="glyphicon glyphicon-plus" style="color:black;float: right;margin-top: 5px;
                                    margin-right: 25px;"></i>
                            </div>   
                                <div style="background-color: #2bd394;color:white;padding-top: 10px;padding-bottom: 10px;border-radius: 20px;position: relative;" id="a_block1">
                                    <div class="paper-row row">
                                        <div class="col-md-1" style="padding-right: 0;" >产品名称:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><select style="color: black;" id="block1_name" ng-model="block1_name" ng-change="setCommission()">
                                            <option value="7165">泰康乐安康</option>
                                            <option value="7167">华夏健康人生</option>
                                            <option value="7160">华夏常青树2015</option>
                                            <option value="7238">华夏福临门铂金版2015</option>
                                            <option value="7273">弘康健康人生重大疾病A款（附加轻症）</option>
                                        </select></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">保额:</div>
                                        <div class="col-md-2 add-yuan" style="padding-left: 0;"><input id="block1_baoe"></input></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">保费:</div>
                                        <div class="col-md-2 add-yuan" style="padding-left: 0;"><input id="block1_baofee" ng-model="block1_baofee" ng-change="setCommission()"></input></div>
                                        <div class="col-md-1"></div>
                                    </div> 

                                    <div class="paper-row row">
                                        <div class="col-md-1" style="padding-right: 0;" >保障期间:</div>
                                        <div class="col-md-2 add-year" style="padding-left: 0;"><input id="block1_baozhangqijian"></input></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">缴费年限:</div>
                                        <div class="col-md-2 add-year" style="padding-left: 0;"><input id="block1_jiaofeinianxian" ng-model="block1_jiaofeinianxian" ng-change="setCommission()"></input></div>
                                        <div class="col-md-1"></div>
                                    </div> 

                                    <div style="position: absolute;left: 100%;top: 10px;margin-left: -30px;" id="block1" 
                                    ng-click="delete_block($event)"><i class="glyphicon glyphicon-remove"></i></div>
                                </div>

                             
                            <div class="paper-title" style="margin-top: 50px;">
                               投保人信息
                            </div> 
                                <div class="paper-row row">
                                    <div class="col-md-1" style="padding-right: 0;" >姓名:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input ng-model="toubaoren_name"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">性别:</div>
                                    <div class="col-md-2 " style="padding-left: 0;"><select ng-model="toubaoren_gender" class="select-gender"></select></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">身份证号:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input ng-model="toubaoren_id"></input></div>
                                    <div class="col-md-1"></div>
                                </div> 
                                <div class="paper-row row">
                                    <div class="col-md-1" style="padding-right: 0;" >年龄:</div>
                                    <div class="col-md-2 add-sui" style="padding-left: 0;"><input ng-model="toubaoren_age"></input></div>
                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;" >划款卡号:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input ng-model="toubaoren_bankNum"></input></div>

                                    <div class="col-md-1"></div>
                                    <div class="col-md-1" style="padding-right: 0;">手机:</div>
                                    <div class="col-md-2" style="padding-left: 0;"><input ng-model="toubaoren_phone"></input></div>
                                    <div class="col-md-1"></div>
                                </div> 

                            <div class="paper-title" style="margin-top: 50px;">
                               被保人信息
                              <!--  <i onclick="add_beibaoren()" class="glyphicon glyphicon-plus" style="color:black;float: right;margin-top: 5px;
                                margin-right: 25px;"></i> -->
                            </div> 
                                <div id="a_beibaoren1">
                                    <div class="paper-row row">
                                        <div class="col-md-1" style="padding-right: 0;" >姓名:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><input ng-model="beibaoren_name" id="beibaoren1_name"></input></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">性别:</div>
                                        <div class="col-md-2 " style="padding-left: 0;"><select ng-model="beibaoren_gender" id="beibaoren1_gender" class="select-gender"></select></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">身份证号:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><input ng-model="beibaoren_id" id="beibaoren1_ID"></input></div>
                                        <div class="col-md-1"></div>
                                    </div> 
                                    <div class="paper-row row">
                                        <div class="col-md-1" style="padding-right: 0;" >年龄:</div>
                                        <div class="col-md-2 add-sui" style="padding-left: 0;"><input ng-model="beibaoren_age" id="beibaoren1_age"></input></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;" >与投保人</div>
                                        <div class="col-md-2 add-guanxi" style="padding-left: 0;"><select  ng-model="beibaoren_relationship" id="beibaoren1_relationship"><option value="1">本人</option><option value="2">夫妻</option><option value="3">父子</option><option value="4">母子</option><option value="5">其他</option></select></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">手机:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><input ng-model="beibaoren_phone" id="beibaoren1_phone"></input></div>
                                        <div class="col-md-1"></div>
                                    </div> 
                                </div>

                                

                            <div class="paper-title" style="margin-top: 50px;">
                               受益人信息
                               <i ng-click="add_shouyiren()" class="glyphicon glyphicon-plus" style="color:black;float: right;margin-top: 5px;
                                margin-right: 25px;"></i>
                            </div> 
                                <div id="a_shouyiren1">
                                    <div class="paper-row row">
                                        <div class="col-md-1" style="padding-right: 0;" >姓名:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><input id="shouyiren1_name"></input></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">性别:</div>
                                        <div class="col-md-2 " style="padding-left: 0;"><select id="shouyiren1_gender" class="select-gender"></select></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">身份证号:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><input id="shouyiren1_ID"></input></div>
                                        <div class="col-md-1"></div>
                                    </div> 
                                    <div class="paper-row row">
                                        <div class="col-md-1" style="padding-right: 0;" >年龄:</div>
                                        <div class="col-md-2 add-sui" style="padding-left: 0;"><input id="shouyiren1_age"></input></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;" >与投保人</div>
                                        <div class="col-md-2 add-guanxi" style="padding-left: 0;"><select id="shouyiren1_relationship">
                                            <option value="1">本人</option><option value="2">夫妻</option><option value="3">父子</option><option value="4">母子</option><option value="5">其他</option>
                                        </select></div>
                                        <div class="col-md-1"></div>
                                        <div class="col-md-1" style="padding-right: 0;">手机:</div>
                                        <div class="col-md-2" style="padding-left: 0;"><input id="shouyiren1_phone"></input></div>
                                        <div class="col-md-1"></div>
                                    </div> 
                                </div>
                            
                            <div class="paper-title" style="margin-top: 50px;">
                               订单状态更新
                            </div> 
                                <div class="btn btn-primary" style="margin-top: 10px;margin-bottom: 10px;" ng-click="addStatus()">
                                    <i class="glyphicon glyphicon-edit glyphicon-white">
                                    </i>
                                    添加状态
                                </div>

                                <table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
                                    <thead>
                                    <tr>
                                        <th>操作</th>
                                        <th>日期</th>
                                        <th>时间</th>
                                        <th>状态</th>
                                        <th>备注</th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    <tr ng-repeat="s in status">
                                        <td class="center">
                                            <a class="btn btn-info" href="javascript:void(0)" ng-click="updateStatus(s.seq)">
                                                <i class="glyphicon glyphicon-edit icon-white"></i>
                                                编辑
                                            </a>
                                            <a class="btn btn-danger" href="javascript:void(0)" ng-click="del(s.seq)">
                                                <i class="glyphicon glyphicon-trash icon-white"></i>
                                                删除
                                            </a>
                                        </td>
                                        <td class="center">{{s.date}}</td>
                                        <td class="center">{{s.time}}</td>
                                        <td class="center">
                                            {{s.status}}
                                        </td>
                                        <td class="center"><pre ng-class="{true:'pre-odd',false:'pre-even'}[$index%2==0]">{{s.value}}</pre></td>
                                    </tr>

                                    </tbody>
                                </table>

                        </div>
                    </div>
                </div>

            </div>

            <input type="hidden" id="blockList" style="width: 100%;">
            <input type="hidden" id="beibaorenList" value="">
            <input type="hidden" id="shouyirenList" value="" style="width: 100%;">
            <input type="hidden" id="fujianList" style="width: 100%">




            <script type="text/javascript">
                $(function(){
                    $('.select-gender').html('<option value="0">男</option><option value="1">女</option>')
                    // console.log($('#blockList').val())
                })

                function delete_block(id){
                    var blockList_f = JSON.parse($('#blockList').val())
                    // console.log(blockList)
                    $('#a_'+id).css('display','none')
                    eval("blockList_f.a_"+id+"=0")
                    $('#blockList').val(JSON.stringify(blockList_f))
                }

                var beibaorenList = {}
                //1有效，0被删除
                beibaorenList.a_beibaoren1 = 1 
                beibaorenList.length = 1
                $('#beibaorenList').val(JSON.stringify(beibaorenList))

                var beibaoren_num = 1
                function add_beibaoren(){
                    var i = beibaoren_num
                    beibaoren_num++

                    beibaorenList.length = beibaoren_num
                    eval("beibaorenList.a_beibaoren"+beibaoren_num+" = 1")

                    var html = '<div id="a_beibaoren'+beibaoren_num+'" style="border-top:1px dashed #848484;margin-top:30px;position:relative"><div class="paper-row row" style="margin-top:20px"><div class="col-md-1" style="padding-right:0">姓名:</div><div class="col-md-2" style="padding-left:0"><input id="beibaoren'+beibaoren_num+'_name"></div><div class="col-md-1"></div><div class="col-md-1" style="padding-right:0">性别:</div><div class="col-md-2" style="padding-left:0"><select id="beibaoren'+beibaoren_num+'_gender"><option value="0">男</option><option value="1">女</option></select></div><div class="col-md-1"></div><div class="col-md-1" style="padding-right:0">身份证号:</div><div class="col-md-2" style="padding-left:0"><input id="beibaoren'+beibaoren_num+'_ID"></div><div class="col-md-1"></div></div><div class="paper-row row"><div class="col-md-1" style="padding-right:0">与投保人</div><div class="col-md-2 add-guanxi" style="padding-left:0"><select id="beibaoren'+beibaoren_num+'_relationship"><option value="1">本人</option><option value="2">夫妻</option><option value="3">父子</option><option value="4">母子</option><option value="5">其他</option></select></div></div><div style="position:absolute;left:100%;top:10px;margin-left:-30px;color:red" id="beibaoren'+beibaoren_num+'" onclick="delete_beibaoren(this.id)"><i class="glyphicon glyphicon-remove"></i></div></div>';
                    $('#a_beibaoren'+i).after(html)
                    $('#beibaorenList').val(JSON.stringify(beibaorenList))

                }

                function delete_beibaoren(id){
                    $('#a_'+id).css('display','none')
                    eval("beibaorenList.a_"+id+"=0")
                    $('#beibaorenList').val(JSON.stringify(beibaorenList))
                }

                function delete_shouyiren(id){
                    var shouyirenList = JSON.parse($('#shouyirenList').val())
                    $('#a_'+id).css('display','none')
                     eval("shouyirenList.a_"+id+"=0")
                    $('#shouyirenList').val(JSON.stringify(shouyirenList))
                }
            </script>
    
            <script>
                var URL = "http://up.qiniu.com"
                var ACCESS_KEY = "oncNSfeTwUhmEZsZ8ef-9iE6QooeM9d2wwtYa2Se";
                var SECRET_KEY = "LWuNSU8bv57ctwtruNSkXeMToMpvaWN6KyY0px9v";
                
                // var fujianList = [];
                // var fujian = {};
                // function Qiniu_upload(file,token,key){
                //     console.log(fujianList);
                //     var xhr  = new XMLHttpRequest();
                //     xhr.open('POST',URL,true);
                //     var formData = new FormData();
                //     if(key !== null && key !== undefined){
                //         formData.append('key',key);
                //     };
                //     formData.append('token',token);
                //     formData.append('file',file);


                //     xhr.onreadystatechange = function(response){
                //         if(xhr.readyState == 4 && xhr.status == 200 && xhr.responseText!=""){
                //             var blkRet = JSON.parse(xhr.responseText);
                //             layer.msg('上传成功');
                //             var url = 'http://7xrfbc.com2.z0.glb.qiniucdn.com/'+blkRet.key;
                //             var html = '<a href="http://7xrfbc.com2.z0.glb.qiniucdn.com/'+blkRet.key+'" style="margin-left:20px;">'+blkRet.key+'</a>';
                //             $('#upload_results').after(html);


                //             fujian = {};
                //             fujian.name = blkRet.key;
                //             fujian.url = url;

                //             fujianList.push(fujian);

                //             $('#fujianList').val(JSON.stringify(fujianList));

                //         }else if (xhr.status != 200 && xhr.responseText) {
                //             var blkRet = JSON.parse(xhr.responseText);
                //         };
                //     };

                //     xhr.send(formData);
                // };


                function getToken(putPolicy){

                    //step 2
                    putPolicy = JSON.stringify(putPolicy);

                    //step 3
                    var encoded = base64encode(utf16to8(putPolicy));

                    //step 4
                    var hash = CryptoJS.HmacSHA1(encoded, SECRET_KEY);
                    var encoded_signed = hash.toString(CryptoJS.enc.Base64);

                    //step 5
                    var upload_token = ACCESS_KEY + ":" + safe64(encoded_signed) + ":" + encoded;

                    return upload_token;
                }
                
                
            </script>
